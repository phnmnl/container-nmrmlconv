<?xml version='1.0' encoding='UTF-8'?>
<!--Proposed Tool Section: [File Handling]-->
<tool id="zip-nmrml-collection" name="ZIP nmrML Collection" version="0.3">
  <requirements>
    <container type="docker">container-registry.phenomenal-h2020.eu/phnmnl/nmrmlconv</container>
  </requirements>
  <description>Create a zip archive of a nmrML collection.</description>
  <command><![CDATA[
    export IFS=',';
    echo $infiles;
    echo $infiles.name;
    ;
    for infile in $infiles; do echo \$infile >> /tmp/infiles.txt; done;
    for infile in $infiles.name; do echo \$infile >> /tmp/infiles.name.txt; done;
    export inlength=`cat /tmp/infiles.txt | wc -l`;
    mkdir -p /tmp/dataset;
    for c in `seq 1 \$inlength`; do
        export infile=`cat /tmp/infiles.txt | head -n \$c | tail -n 1`;
        export cpfile=`cat /tmp/infiles.name.txt | head -n \$c | tail -n 1`;
        echo "\$cpfile === \$infile";
    done;
    echo zip -r $outfile `echo $infiles | tr ',' ' '`;
  ]]>
  </command>
  <inputs>
    <param name="infiles" type="data" format="nmrML" optional="False" multiple="True" label="Collection data" />
  </inputs>
  <outputs>
    <data name="outfile" type="data" format="no_unzip.zip" label="Zipped nmrML collection" />
  </outputs>
  <help>Create a zip archive of a nmrML collection.</help>
</tool>

